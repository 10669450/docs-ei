# Custom Sequences with Proxy Services
## Example use case

## Synapse configuration

This configuration creates two Proxy Services. The first Proxy Service "StockQuoteProxy1" uses the sequence named "proxy_1" to process incoming messages and the sequence named "out" to process outgoing responses. The second Proxy Service "StockQuoteProxy2" is set to directly forward messages that are received to the endpoint named "proxy_2_endpoint" without any mediation.

```xml tab='Endpoint'
<endpoint name="proxy_2_endpoint">
    <address uri="http://localhost:9000/services/SimpleStockQuoteService"/>
</endpoint>
```

```xml tab='Local Entry'
<localEntry key="proxy_wsdl" src="file:samples/service-bus/resources/proxy/sample_proxy_1.wsdl"/>
```

```xml tab='Sequence'
<sequence name="proxy_1">
    <send>
        <endpoint><address uri="http://localhost:9000/services/SimpleStockQuoteService"/></endpoint>
    </send>
</sequence>
```

```xml tab='Out Sequence'
<sequence name="out">
    <send/>
</sequence>
```

```xml tab='Proxy Service 1'
<proxy name="StockQuoteProxy1">
    <publishWSDL key="proxy_wsdl"/>
    <target inSequence="proxy_1" outSequence="out"/>
</proxy>
```

```xml tab='Proxy Service 2'
<proxy name="StockQuoteProxy2">
    <publishWSDL key="proxy_wsdl"/>
    <target endpoint="proxy_2_endpoint" outSequence="out"/>
</proxy>
```
## Build and run

Create the artifacts:

1. Set up WSO2 Integration Studio.
2. Create an ESB Config project
3. Create integration artifacts with the above configuration.
4. Deploy the artifacts in your Micro Integrator.

Set up the back-end service:

........

Invoke the Micro Integrator:

You could send a stock quote request to each of these Proxy Services and receive the reply generated by the actual service hosted on the Axis2 instance.

```bash
ant stockquote -Daddurl=http://localhost:8280/services/StockQuoteProxy1
ant stockquote -Daddurl=http://localhost:8280/services/StockQuoteProxy2
```